(this["webpackJsonpbridge-client"]=this["webpackJsonpbridge-client"]||[]).push([[0],{50:function(e,t,a){},51:function(e,t,a){},91:function(e,t){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(2),c=a.n(s),i=a(44),r=a.n(i),o=(a(50),a(11)),l=a(12),u=a(5),d=a(14),m=a(13),p=(a(51),a(23)),h=a.n(p);var j=a(22),b=a.n(j),y=(a(94),a(95),b()("https://adampiziak.com"));a(96);function v(e){var t=e.game,a=e.user,s=e.player,c=e.turn,i=(4-a.position+s.position)%4,r="p".concat(i),o=s.dummy||s.position===a.position||a.dummy&&s.declarer,l=s.position===c,u=s.position===a.position||a.declarer&&s.position===(a.position+2)%4;u&=l,a.dummy&&(u=!1);var d=s.cards.sort((function(e,t){return e-t})).map((function(e){var a="cards/back2.jpg";return o&&(a="cards/"+e+".png"),u&&l?Object(n.jsx)("img",{className:"player-card ".concat(o?"visible":""),alt:"card",src:a,onClick:function(){return function(e,t,a){if(!e)return;y.emit("play_card",{player_key:t,game_key:e,card_played:a})}(t.game_key,s.key,e)}},e.toString()):Object(n.jsx)("img",{className:"player-card ".concat(o?"visible":""),alt:"card",src:a},e.toString())}));return Object(n.jsxs)("div",{className:"player ".concat(r," ").concat(u?"controllable":""," ").concat(l?"player-turn":""),children:[Object(n.jsx)(g,{player:s}),Object(n.jsx)("div",{className:"player-hand",children:d})]})}function g(e){var t=e.player;return Object(n.jsxs)("div",{className:"player-header",children:[Object(n.jsxs)("div",{className:"player-name",children:[Object(n.jsxs)("span",{className:"name",children:[" ",t.name]}),t.dummy&&Object(n.jsx)("span",{className:"dummy",children:" (Dummy)"}),t.declarer&&Object(n.jsx)("span",{className:"declarer",children:" (Declarer)"}),t.bot&&Object(n.jsx)("span",{className:"bot",children:"BOT "})]}),Object(n.jsx)("div",{children:t.points})]})}a(97);function f(e){var t=e.user,a=(e.cards,e.turn,e.players.map((function(e){var a=e.card_played,s="cards/"+a+".png",c=(4-t.position+e.position)%4;return Object(n.jsx)("img",{className:"table-card p".concat(c," ").concat(a>=0?"played":""),alt:"table-card",src:s},a.toString())})));return Object(n.jsx)("div",{className:"table-container",children:Object(n.jsx)("div",{className:"table",children:a})})}var O="";function x(e){switch(e){case 0:return"clubs";case 1:return"diamonds";case 2:return"hearts";case 3:return"spades"}}var k=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var s=e.player;return O=n.props.invite_code,s.key,n.state={user:s,time:(new Date).getTime(),game:{key:O,players:[],round_cards:[]}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.connect()}},{key:"connect",value:function(){var e=this,t=this.props.invite_code;y.emit("join_game",{game_key:t}),y.on("game_state",(function(t){var a=JSON.parse(t).game_state,n=a.turn_player===e.state.user.position;e.setState({game:a,player_turn:n})})),y.on("winner",(function(t){e.state.user.key===t?alert(":D"):alert(":(")}))}},{key:"render",value:function(){var e=this,t=this.state.game,a=this.state.game.players.find((function(t){return t.key===e.state.user.key})),s=t.players.map((function(s){return Object(n.jsx)(v,{user:a,player:s,turn:t.turn,game:e.state.game})}));return Object(n.jsxs)("div",{className:"game",children:[Object(n.jsxs)("div",{className:"game-info",children:[this.props.invite_code,Object(n.jsx)("br",{}),"SUIT: ",x(t.trump_suit)]}),s,Object(n.jsx)(f,{user:a,players:t.players,cards:t.round_cards,turn:t.turn}),Object(n.jsxs)("div",{className:"game-actions",children:[Object(n.jsx)("button",{className:"action-restart",onClick:function(){return e=t.game_key,void y.emit("redeal",{game_key:e});var e},children:"Redeal"}),Object(n.jsx)("button",{className:"action-restart",onClick:function(){return e=t.game_key,void y.emit("start",{game_key:e});var e},children:"Start"})]})]})}}]),a}(c.a.Component),N=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={page:0,key:"",name:"",is_host:!1,value:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleChangeName=n.handleChangeName.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return 0===this.state.page?Object(n.jsx)("div",{className:"home",children:Object(n.jsxs)("div",{className:"home-container",children:[Object(n.jsx)("h1",{children:"DRL Bridge"}),Object(n.jsx)("button",{className:"primary",onClick:function(){return e.createGame()},children:"Create Game"}),Object(n.jsx)("button",{className:"",onClick:function(){return e.goToJoinPG()},children:"Join"}),Object(n.jsx)("button",{className:"",onClick:function(){return e.goToJoinPG()},children:"Watch Bots"})]})}):1===this.state.page?Object(n.jsx)("div",{className:"App",children:Object(n.jsx)("div",{className:"create-lobby-page"})}):2===this.state.page?Object(n.jsx)(k,{invite_code:this.state.key,player:this.state.player}):3===this.state.page?Object(n.jsxs)("div",{className:"join-container",children:[Object(n.jsxs)("div",{className:"nes-field",children:[Object(n.jsx)("label",{children:"Name"}),Object(n.jsx)("input",{type:"text",id:"name_field",className:"nes-input",name:this.state.name,onChange:this.handleChangeName})]}),Object(n.jsxs)("div",{className:"nes-field",children:[Object(n.jsx)("label",{children:"Invite Code"}),Object(n.jsx)("input",{type:"text",id:"key_field",className:"nes-input",value:this.state.value,onChange:this.handleChange})]}),Object(n.jsx)("button",{type:"button",className:"nes-btn is-primary",onClick:this.handleSubmit,children:"Join"})]}):void 0}},{key:"goToJoinPG",value:function(){this.setState((function(e){return{page:3}}))}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t,a,n=this;e.preventDefault(),(t=this.state.value,a=this.state.name,h.a.post("https://adampiziak.com/join",{game_key:t,name:a})).then((function(e){var t=JSON.parse(e.data.player).player;n.setState((function(e){return{page:2,key:n.state.value,player:t}}))})).catch((function(e){console.error(e)}))}},{key:"createGame",value:function(){var e=this;this.setState((function(e){return{page:1}})),h.a.post("https://adampiziak.com/create").then((function(t){var a=JSON.parse(t.data.player).player;e.setState((function(e){return{page:2,key:t.data.key,player:a}}))})).catch((function(t){console.log(t),setTimeout(function(){this.setState((function(e){return{page:0}}))}.bind(e),500)}))}}]),a}(c.a.Component),_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,99)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))};r.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root")),_()}},[[98,1,2]]]);
//# sourceMappingURL=main.f8000253.chunk.js.map