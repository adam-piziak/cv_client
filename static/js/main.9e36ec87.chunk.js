(this["webpackJsonpbridge-client"]=this["webpackJsonpbridge-client"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(2),s=a.n(c),i=a(48),r=a.n(i),o=(a(56),a(13)),l=a(14),u=a(5),d=a(17),p=a(16),b=(a(57),a(27),a(25)),j=a.n(b);a(74),a(75);var h=a(49),m=a.n(h)()("https://adampiziak.com");a(102);function v(e){var t=e.game,a=e.user,c=e.player,s=e.turn,i=e.game.lead,r=(4-a.position+c.position)%4,o="p".concat(r),l=c.dummy||c.position===a.position||a.dummy&&c.declarer||e.visible,u=c.position===s,d=c.position===i&&u,p=c.position===a.position||a.declarer&&c.position===(a.position+2)%4;p&=u,a.dummy&&(p=!1);var b=c.cards.sort((function(e,t){return e-t})).map((function(e){var a="cards/back2.jpg";return l&&(a="cards/"+e+".png"),p&&u?Object(n.jsx)("img",{className:"player-card ".concat(l?"visible":""),alt:"card",src:a,onClick:function(){return function(e,t,a){if(!e)return;m.emit("play_card",{player_key:t,game_key:e,card_played:a})}(t.key,c.key,e)}},e.toString()):Object(n.jsx)("img",{className:"player-card ".concat(l?"visible":""),alt:"card",src:a},e.toString())}));return Object(n.jsxs)("div",{className:"player ".concat(o," ").concat(p?"controllable":""," ").concat(u?"player-turn":""," ").concat(d?"winner":""),children:[Object(n.jsx)(y,{player:c}),Object(n.jsx)("div",{className:"player-hand",children:b})]})}function y(e){var t=e.player;return Object(n.jsxs)("div",{className:"player-header",children:[Object(n.jsxs)("div",{className:"player-name",children:[Object(n.jsxs)("span",{className:"name",children:[" ",t.name]}),t.dummy&&Object(n.jsx)("span",{className:"dummy",children:" (Dummy)"}),t.declarer&&Object(n.jsx)("span",{className:"declarer",children:" (Declarer)"}),t.bot&&Object(n.jsx)("span",{className:"bot",children:"BOT "})]}),Object(n.jsx)("div",{children:t.points})]})}a(103);function g(e){var t=e.user,a=e.players.map((function(e){var a=e.card_played,c="cards/"+a+".png",s=(4-t.position+e.position)%4;return Object(n.jsx)("img",{className:"table-card p".concat(s," ").concat(a>=0?"played":""),alt:"table-card",src:c},a.toString())}));return Object(n.jsx)("div",{className:"table-container",children:Object(n.jsx)("div",{className:"table",children:a})})}var O="";function f(e){switch(e){case 0:return"clubs";case 1:return"diamonds";case 2:return"hearts";case 3:return"spades";default:return"?"}}var x=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var c=e.player;return O=n.props.invite_code,n.state={user:c,time:(new Date).getTime(),visible:!1,game:{key:O,players:[],round_cards:[]}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.connect()}},{key:"connect",value:function(){var e=this,t=this.props.invite_code;m.emit("join_game",{game_key:t}),m.on("game_state",(function(t){var a=JSON.parse(t).game_state,n=a.turn_player===e.state.user.position;e.setState({game:a,player_turn:n})})),m.on("winner",(function(t){e.state.user.key===t?alert(":D"):alert(":(")}))}},{key:"toggleVisibility",value:function(){this.setState((function(e){return{visible:!e.visible}}))}},{key:"render",value:function(){var e=this,t=this.state.game,a=this.state.game.players.find((function(t){return t.key===e.state.user.key})),c=t.players.map((function(c){return Object(n.jsx)(v,{user:a,player:c,visible:e.state.visible,turn:t.turn,game:e.state.game})}));return Object(n.jsxs)("div",{className:"game",children:[Object(n.jsxs)("div",{className:"game-info",children:[this.props.invite_code,Object(n.jsx)("br",{}),"SUIT: ",f(t.trump_suit),Object(n.jsx)("br",{}),"Contract: ",this.state.game.contract_number]}),c,Object(n.jsx)(g,{user:a,players:t.players,cards:t.round_cards,turn:t.turn}),Object(n.jsxs)("div",{className:"game-actions",children:[Object(n.jsx)("button",{className:"action-restart",onClick:function(){return e=t.key,void m.emit("start",{key:e});var e},children:"Start"}),Object(n.jsx)("button",{className:"action-restart",onClick:function(){return e=t.key,void m.emit("redeal",{key:e});var e},children:"Deal"}),Object(n.jsx)("button",{className:"action-restart",onClick:function(){return e.toggleVisibility()},children:"Toggle Visibility"})]})]})}}]),a}(s.a.Component),N=a(50),k=a(26),C=a(7),S=a.n(C);a(105),a(106);function _(e){var t=Object(c.useState)("Stinky Cabbage"),a=Object(k.a)(t,2),s=a[0],i=a[1],r=[{value:0,label:"[host] ".concat(s)},{value:1,label:"Human"},{value:2,label:"Arch 2"},{value:3,label:"RandomMove"},{value:4,label:"BrianBot"}],o=Object(c.useState)([0,4,4,4]),l=Object(k.a)(o,2),u=l[0],d=l[1],p=function(e,t){var a=u;if(a[e]=t.value,0===t.value)for(var n=0;n<4;n++)0===a[n]&&n!==e&&(a[n]=1);console.log(a),d(Object(N.a)(a)),console.log(u),console.log(r[u[0]]),console.log(r)};return Object(n.jsx)("div",{className:"create-lobby-page",children:Object(n.jsx)("div",{className:"create-lobby-container",children:Object(n.jsxs)("div",{className:"create-lobby",children:[Object(n.jsx)("input",{className:"drl-text-input host-name",value:s,type:"text",placeholder:"Host name",onChange:function(e){i(e.target.value)}}),Object(n.jsxs)("div",{className:"tablez",children:[Object(n.jsx)("div",{className:"player-position north",children:Object(n.jsx)(S.a,{className:"drl-dropdown cp",options:r,value:r[u[0]],onChange:function(e){return p(0,e)},placeholder:"Select an option"})}),Object(n.jsx)("div",{className:"player-position east",children:Object(n.jsx)(S.a,{className:"drl-dropdown cp",options:r,value:r[u[1]],onChange:function(e){return p(1,e)},placeholder:"Select an option"})}),Object(n.jsx)("div",{className:"player-position west",children:Object(n.jsx)(S.a,{className:"drl-dropdown cp",options:r,value:r[u[3]],onChange:function(e){return p(3,e)},placeholder:"Select an option"})}),Object(n.jsx)("div",{className:"player-position south",children:Object(n.jsx)(S.a,{className:"drl-dropdown cp",options:r,value:r[u[2]],onChange:function(e){return p(2,e)},placeholder:"Select an option"})})]}),Object(n.jsx)("button",{className:"drl-button",onClick:function(){return e.create([s,u])},children:"Launch Game"})]})})})}var w=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={page:0,key:"",name:"",is_host:!1,value:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleChangeName=n.handleChangeName.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return 0===this.state.page?Object(n.jsx)("div",{className:"home",children:Object(n.jsxs)("div",{className:"home-container",children:[Object(n.jsx)("h1",{children:"DRL Bridge"}),Object(n.jsx)("button",{className:"primary",onClick:function(){return e.goToCreatePG()},children:"Create Game"}),Object(n.jsx)("button",{className:"",onClick:function(){return e.goToJoinPG()},children:"Join"}),Object(n.jsx)("button",{className:"",onClick:function(){return e.goToJoinPG()},children:"Watch Bots"})]})}):1===this.state.page?Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(_,{create:this.createGame.bind(this)})}):2===this.state.page?Object(n.jsx)(x,{invite_code:this.state.key,player:this.state.player}):3===this.state.page?Object(n.jsxs)("div",{className:"join-container",children:[Object(n.jsxs)("div",{className:"nes-field",children:[Object(n.jsx)("label",{children:"Name"}),Object(n.jsx)("input",{type:"text",id:"name_field",className:"nes-input",name:this.state.name,onChange:this.handleChangeName})]}),Object(n.jsxs)("div",{className:"nes-field",children:[Object(n.jsx)("label",{children:"Invite Code"}),Object(n.jsx)("input",{type:"text",id:"key_field",className:"nes-input",value:this.state.value,onChange:this.handleChange})]}),Object(n.jsx)("button",{type:"button",className:"nes-btn is-primary",onClick:this.handleSubmit,children:"Join"})]}):void 0}},{key:"goToJoinPG",value:function(){this.setState((function(e){return{page:3}}))}},{key:"goToCreatePG",value:function(){this.setState((function(e){return{page:1}}))}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t,a,n=this;e.preventDefault(),(t=this.state.value,a=this.state.name,j.a.post("https://adampiziak.com/join",{game_key:t,name:a})).then((function(e){var t=JSON.parse(e.data.player).player;n.setState((function(e){return{page:2,key:n.state.value,player:t}}))})).catch((function(e){console.error(e)}))}},{key:"createGame",value:function(e){var t,a,n=this;(t=e[0],a=e[1],j.a.post("https://adampiziak.com/create",{host:t,players:a})).then((function(e){var t=JSON.parse(e.data.player).player;n.setState((function(a){return{page:2,key:e.data.key,player:t}}))})).catch((function(e){n.setState((function(e){return{page:0}}))}))}}]),a}(s.a.Component),T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,108)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))};r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(w,{})}),document.getElementById("root")),T()},27:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},99:function(e,t){}},[[107,1,2]]]);
//# sourceMappingURL=main.9e36ec87.chunk.js.map