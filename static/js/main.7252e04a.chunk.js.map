{"version":3,"sources":["socket.js","Game/Player/Player.js","Game/Table/Table.js","Game/Game.js","App.js","api.js","reportWebVitals.js","index.js"],"names":["socket","io","Player","props","game","user","player","turn","bearing","position","bearingName","visible","dummy","declarer","player_turn","controllable","playerHand","cards","sort","a","b","map","c","backgroundFile","className","alt","src","onClick","card","console","log","emit","playCard","game_key","key","toString","PlayerHeader","name","bot","points","Table","cardList","players","p","card_played","relPos","gGameKey","started","suitName","val","Game","invite_code","state","time","Date","getTime","round_cards","this","connect","on","gs_json","JSON","parse","game_state","turn_player","setState","length","is_host","alert","find","playersComponents","trump_suit","React","Component","App","page","value","handleChange","bind","handleChangeName","handleSubmit","createGame","goToJoinPG","type","id","onChange","event","target","preventDefault","axios","post","then","res","data","catch","err","error","setTimeout","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7252e04a.chunk.js","sourcesContent":["import io  from 'socket.io-client';\n\nexport const socket = io('https://adampiziak.com');\n","import React, { useState } from 'react';\nimport {socket} from '../../socket'\nimport './Player.sass'\n\nexport function Player(props) {\n  const game = props.game\n  const user = props.user\n  const player = props.player\n  const turn = props.turn\n\n  // position relative to user\n  const bearing = ((-user.position + 4) + player.position) % 4\n  const bearingName = `p${bearing}`\n\n  const visible = (player.dummy) ||\n                (player.position === user.position) ||\n                (user.dummy && player.declarer)\n\n  // Player turn\n  const player_turn = player.position === turn\n\n  // Can be controlled by user\n  let controllable = (player.position === user.position) ||\n                     (user.declarer && player.position === ((user.position + 2) % 4 ))\n  controllable = controllable & player_turn\n  if (user.dummy) {\n    controllable = false\n  }\n\n  // cards\n  const playerHand = player.cards.sort((a,b) => a - b).map((c) => {\n    let backgroundFile = \"cards/back2.jpg\"\n    if (visible) {\n      backgroundFile = \"cards/\" + c + \".png\"\n    }\n    if (controllable && player_turn) {\n      return (\n        <img className={`player-card ${visible ? \"visible\" : \"\"}`} alt=\"card\" key={c.toString()} src={backgroundFile} onClick={() => playCard(game.game_key,player.key, c)}/>\n      )\n    } else {\n      return (\n        <img className={`player-card ${visible ? \"visible\" : \"\"}`} alt=\"card\" key={c.toString()} src={backgroundFile} />\n      )\n    }\n  })\n\n  return (\n    <div className={`player ${bearingName} ${controllable ? \"controllable\" : \"\"} ${player_turn ? \"player-turn\" : \"\"}`}>\n      <PlayerHeader player={ player }/>\n      <div className=\"player-hand\">\n        { playerHand }\n      </div>\n\n    </div>\n  )\n}\n\nfunction playCard(game, player, card) {\n  console.log(game);\n  if (!game) {\n    return\n  }\n  socket.emit(\"play_card\", {\n    \"player_key\": player,\n    \"game_key\": game,\n    \"card_played\": card\n  });\n}\n\n\nfunction PlayerHeader(props) {\n  const player = props.player\n  return (\n    <div className=\"player-header\">\n      <div className=\"player-name\">\n        <span className=\"name\"> {player.name}</span>\n        { player.dummy && <span className=\"dummy\"> (Dummy)</span> }\n        { player.declarer && <span className=\"declarer\"> (Declarer)</span> }\n        { player.bot && <span className=\"bot\">BOT </span> }\n      </div>\n      <div>\n        { player.points }\n      </div>\n    </div>\n  )\n}\n","import React, { useState } from 'react';\nimport './Table.sass'\n\nexport function Table(props) {\n  const user = props.user\n  const cards = props.cards\n  const turn = props.turn\n  const players = props.players\n\n  const cardList = players.map((p) => {\n    const c = p.card_played\n    const backgroundFile = \"cards/\" + c + \".png\"\n    const relPos = ((-user.position + 4) + p.position) % 4\n\n    return (\n      <img className={`table-card p${relPos} ${c >= 0 ? \"played\" : \"\"}`} alt=\"table-card\" key={c.toString()} src={backgroundFile} />\n    )\n  })\n\n  return (\n    <div className=\"table-container\">\n      <div className=\"table\">\n        {cardList}\n      </div>\n    </div>\n  )\n}\n","import React from 'react';\nimport io  from 'socket.io-client';\nimport './Game.css';\nimport './Game.sass'\nimport { Player } from './Player/Player'\nimport { Table } from './Table/Table'\nimport {socket} from '../socket'\n\n\nlet gGameKey = \"\"\nlet gPlayerKey = \"\"\n\n\nlet started = false\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    const player = props.player\n    gGameKey = this.props.invite_code\n    gPlayerKey = player.key\n    this.state = {\n      user: player,\n      time: new Date().getTime(),\n      game: {\n        key: gGameKey,\n        players: [],\n        round_cards: []\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.connect()\n  }\n\n  connect() {\n    const key = this.props.invite_code\n    socket.emit('join_game', { \"game_key\": key });\n\n\n    socket.on('game_state', state => {\n\n      const gs_json = JSON.parse(state).game_state\n      const player_turn = gs_json.turn_player === this.state.user.position\n      this.setState({\n        game: gs_json,\n        player_turn: player_turn\n      })\n      console.log(gs_json);\n      console.log(this.state.user);\n      if (gs_json.players.length > 3 && this.state.user.is_host && !started) {\n        started = true\n        socket.emit('start', { \"game_key\": key });\n      }\n    })\n\n    socket.on('winner', key => {\n      if (this.state.user.key === key) {\n        alert(\":D\");\n      } else {\n        alert(\":(\");\n      }\n    })\n  }\n\n  render() {\n    const game = this.state.game\n    const user = this.state.game.players.find(p => p.key === this.state.user.key)\n    const playersComponents = game.players.map((p) =>\n        <Player user={user}\n                player={p}\n                turn={game.turn_player}\n                game={this.state.game} />\n      )\n    return (\n      <div className=\"game\">\n        <div className=\"game-info\">\n          { this.props.invite_code}\n          <br />\n          SUIT: { suitName(game.trump_suit)}\n        </div>\n        { playersComponents }\n        <Table user={user} players={game.players} cards={game.round_cards} turn={game.turn_player} />\n      </div>\n    )\n  }\n}\n\nfunction suitName(val) {\n  switch(val) {\n      case 0: return \"clubs\";\n      case 1: return \"diamonds\";\n      case 2: return \"hearts\";\n      case 3: return \"spades\"\n  }\n}\n\nexport default Game;\n","import React from 'react';\nimport './App.sass';\nimport {createGame, joinGame} from './api';\nimport Game from './Game/Game'\n\nconst PG_HOME = 0\nconst PG_CREATING = 1\nconst PG_GAME = 2\nconst PG_JOIN = 3\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: PG_HOME,\n      key: \"\",\n      name: \"\",\n      is_host: false,\n      value: \"\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeName = this.handleChangeName.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  render() {\n    if (this.state.page === PG_HOME) {\n      return (\n          <div className=\"home\">\n            <div className=\"home-container\">\n              <h1>DRL Bridge</h1>\n              <button className=\"primary\" onClick={() => this.createGame()}>Create Game</button>\n              <button className=\"\" onClick={() => this.goToJoinPG()}>Join</button>\n              <button className=\"\" onClick={() => this.goToJoinPG()}>Watch Bots</button>\n            </div>\n          </div>\n      );\n    }\n\n    if (this.state.page === PG_CREATING) {\n      return (\n        <div className=\"App\">\n          <div className=\"create-lobby-page\">\n          </div>\n        </div>\n      );\n    }\n\n    if (this.state.page === PG_GAME) {\n      return (\n        <Game invite_code={this.state.key} player={this.state.player}></Game>\n      );\n    }\n\n    if (this.state.page === PG_JOIN) {\n      return (\n        <div className=\"join-container\">\n          <div className=\"nes-field\">\n            <label>Name</label>\n            <input type=\"text\" id=\"name_field\" className=\"nes-input\" name={this.state.name} onChange={this.handleChangeName}/>\n          </div>\n          <div className=\"nes-field\">\n            <label>Invite Code</label>\n            <input type=\"text\" id=\"key_field\" className=\"nes-input\" value={this.state.value} onChange={this.handleChange}/>\n          </div>\n          <button type=\"button\" className=\"nes-btn is-primary\" onClick={this.handleSubmit}>Join</button>\n        </div>\n      );\n    }\n  }\n\n  goToJoinPG() {\n    this.setState((state) => {\n      return {page: PG_JOIN}\n    })\n  }\n\n  handleChangeName(event) {\n    this.setState({name: event.target.value});\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    joinGame(this.state.value, this.state.name).then((res) => {\n      let player_json = JSON.parse(res.data.player)\n      let player = player_json.player\n      this.setState((state) => {\n        return {page: PG_GAME, key: this.state.value, player}\n      })\n    }).catch((err) => {console.error(err);})\n\n  }\n\n  createGame() {\n    this.setState((state) => {\n      return {page: PG_CREATING}\n    })\n    createGame().then((res) => {\n      let player_json = JSON.parse(res.data.player)\n      let player = player_json.player\n      this.setState((state) => {\n        return { page: PG_GAME, key: res.data.key, player}\n      })\n\n    }).catch((err) => {\n      console.log(err);\n      setTimeout(function () {\n        this.setState((state) => {\n          return {page: PG_HOME}\n        })\n      }.bind(this), 500);\n    })\n  }\n\n}\n\n\n\n\nexport default App;\n","import axios from 'axios';\n\n\nexport function createGame() {\n    return axios.post('https://adampiziak.com/create')\n}\n\nexport function joinGame(key, name) {\n    return axios.post('https://adampiziak.com/join', {game_key: key, name: name})\n}\n\n/*\nexport function createGame() {\n    return axios.post('http://127.0.0.1:5000/create')\n}\n\nexport function joinGame(key, name) {\n    return axios.post('http://127.0.0.1:5000/join', {game_key: key, name: name})\n}\n*/\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}