{"version":3,"sources":["Game.js","App.js","api.js","reportWebVitals.js","index.js"],"names":["gGameKey","gPlayerKey","socket","io","Game","props","player","invite_code","key","state","user","time","Date","getTime","game_state","players","this","connect","console","log","emit","on","gs_json","JSON","parse","player_turn","turn_player","position","points","find","p","tricks_won","setState","player_turn_class","className","name","PlayerComponent","getPlayer","direction","React","Component","OponentCards","cards","cardItems","sort","a","b","map","card","alt","src","toString","card_played","backgroundFile","MyCardsList","filter","undefined","onClick","playCard","App","page","is_host","value","handleChange","bind","handleChangeName","handleSubmit","createGame","goToJoinPG","type","id","onChange","event","target","preventDefault","axios","post","game_key","then","res","data","catch","err","error","setTimeout","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.01c075b5.chunk.js","sourcesContent":["import React from 'react';\nimport io  from 'socket.io-client';\nimport './Game.css';\n\nconst LEFT = 1\nconst TOP = 2\nconst RIGHT = 3\n//const BOTTOM = 1\n//const STAGE_WAITING = 10\n//const STAGE_PLAYING = 11\n\nlet gGameKey = \"\"\nlet gPlayerKey = \"\"\n//const socket = io('http://127.0.0.1:5000');\nconst socket = io('http://165.22.187.65:5000');\n\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    const player = props.player\n    gGameKey = this.props.invite_code\n    gPlayerKey = player.key\n    this.state = {\n      user: player,\n      time: new Date().getTime(),\n      game_state: {\n        players: [null, null, null, null]\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.connect()\n  }\n\n  connect() {\n    const key = this.props.invite_code\n    console.log('connecting...');\n    socket.emit('join_game', { \"game_key\": key });\n\n\n    socket.on('game_state', state => {\n\n      const gs_json = JSON.parse(state).game_state\n      const player_turn = gs_json.turn_player === this.state.user.position\n      let points = gs_json.players.find(p => p.key === this.state.user.key).tricks_won\n      if (!points) {\n        points = 0\n      }\n      this.setState({\n        game_state: gs_json,\n        player_turn: player_turn,\n        points: points\n      })\n      console.log(gs_json);\n    })\n\n\n\n    /*\n    socket.on(\"game_state\", (game_state) => {\n      const gs_json = JSON.parse(game_state).game_state\n      //const players = gs_json.players.map((p) => new Player(p.key, p.position, p.name, p.is_host, p.cards))\n      console.log(\"GSON\");\n      console.log(gs_json);\n      this.setState({\n        game_state: gs_json\n      })\n\n      //game.setPlayers(players)\n\n    });\n    */\n  }\n\n  render() {\n    let player_turn_class = \"\"\n    if (this.state.player_turn) {\n      player_turn_class = \"player-turn\"\n    }\n    return (\n      <div className=\"game-cont\">\n        <div className=\"invite-code\">\n          {this.state.user.name}\n          <br/>\n\n          <br/>\n          Invite code: {this.props.invite_code}\n        </div>\n        <div className=\"game-area\">\n          <div className=\"player left\">\n            <PlayerComponent player={this.getPlayer(LEFT)} />\n          </div>\n          <div className=\"player right\">\n            <PlayerComponent player={this.getPlayer(RIGHT)} />\n          </div>\n          <div className=\"player top\">\n            <PlayerComponent player={this.getPlayer(TOP)} />\n          </div>\n          <div className={\"player-main \" + player_turn_class}>\n            <div className=\"turn-message\"> Your Turn </div>\n            <div> Points: {this.state.points} </div>\n            <MyCardsList state={this.state}></MyCardsList>\n          </div>\n          <div className=\"playing-area\">\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  getPlayer(direction) {\n    const position = (this.state.user.position + direction) % 4\n    const player = this.state.game_state.players[position]\n    return player\n  }\n}\n\nfunction OponentCards(props) {\n  const cards = props.cards\n  if (cards != null) {\n    const cardItems = cards.sort((a,b) => a - b).map((card) => {\n      //let backgroundFile = \"cards/\" + card + \".png\"\n      let backgroundFile = \"cards/back2.jpg\"\n\n\n      return (\n        <img className=\"op-card\" alt=\"card\" key={card.toString()} src={backgroundFile} />\n      )\n    })\n    return (\n      <div className=\"op-container\">\n        <div className=\"op-card-list\">{cardItems}</div>\n      </div>\n    )\n  } else {\n    return (\"\")\n  }\n}\n\nfunction PlayerComponent(props) {\n    if (props.player != null) {\n      let card = props.player.card_played\n      let backgroundFile = \"cards/\" + card + \".png\"\n      //backgroundFile = \"cards/back2.jpg\"\n      if (card < 0) {\n        return (\n          <div>\n            <div className=\"player-spot\"> {props.player.name} </div>\n            <OponentCards cards={props.player.cards} />\n          </div>\n        )\n      } else {\n        return (\n          <div>\n            <div className=\"player-spot\"> {props.player.name} </div>\n            <OponentCards cards={props.player.cards} />\n            <img className=\"op-card-played\" alt={backgroundFile} key={backgroundFile} src={backgroundFile} />\n          </div>\n        )\n      }\n    } else {\n      return (\n        <div className=\"player-spot free\">Open</div>\n      )\n    }\n}\n\nfunction playCard(card) {\n  console.log(\"playing card \" + card);\n  socket.emit('play_card', {\n    \"game_key\": gGameKey,\n    \"player_key\": gPlayerKey,\n    \"card_played\": card\n    });\n}\n\n\n\nclass MyCardsList extends React.Component {\n  render() {\n    //console.log(this.props.state);\n    const user = this.props.state.game_state.players.filter(p => p).find(p => p.key === this.props.state.user.key);\n    if (user && user !== undefined) {\n      const cardItems = user.cards.sort((a,b) => a - b).map((card) => {\n        let backgroundFile = \"cards/\" + card + \".png\"\n        backgroundFile = \"cards/back.svg\"\n        backgroundFile = \"cards/back2.jpg\"\n        backgroundFile = \"cards/\" + card + \".png\"\n\n        return (\n          <img className=\"my-card\" alt=\"card\" key={card.toString()} src={backgroundFile} onClick={() => playCard(card)}/>\n        )}\n      );\n\n      return (\n        <div className=\"container\">\n          <div className=\"card-list\">{cardItems}</div>\n        </div>\n      )\n    } else {\n      return (\"\")\n    }\n  }\n\n\n}\n\n/*\nfunction shuffle(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n}\n*/\nexport default Game;\n","import React from 'react';\nimport './App.css';\nimport {createGame, joinGame} from './api';\nimport Game from './Game'\n\nconst PG_HOME = 0\nconst PG_CREATING = 1\nconst PG_GAME = 2\nconst PG_JOIN = 3\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: PG_HOME,\n      key: \"\",\n      name: \"\",\n      is_host: false,\n      value: \"\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeName = this.handleChangeName.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  render() {\n    if (this.state.page === PG_HOME) {\n      return (\n            <div className=\"App\">\n              <div className=\"home-wrapper\">\n                <h1>Bridge Client</h1>\n                <button className=\"home-btn nes-btn is-primary\" onClick={() => this.createGame()}>Create Game</button>\n                <button className=\"home-btn nes-btn\" onClick={() => this.goToJoinPG()}>Join</button>\n              </div>\n            </div>\n      );\n    }\n\n    if (this.state.page === PG_CREATING) {\n      return (\n        <div className=\"create-lobby-page\">\n          <b>Creating Game...</b>\n        </div>\n      );\n    }\n\n    if (this.state.page === PG_GAME) {\n      return (\n        <Game invite_code={this.state.key} player={this.state.player}></Game>\n      );\n    }\n\n    if (this.state.page === PG_JOIN) {\n      return (\n        <div className=\"join-container\">\n          <div className=\"nes-field\">\n            <label>Name</label>\n            <input type=\"text\" id=\"name_field\" className=\"nes-input\" name={this.state.name} onChange={this.handleChangeName}/>\n          </div>\n          <div className=\"nes-field\">\n            <label>Invite Code</label>\n            <input type=\"text\" id=\"key_field\" className=\"nes-input\" value={this.state.value} onChange={this.handleChange}/>\n          </div>\n          <button type=\"button\" className=\"nes-btn is-primary\" onClick={this.handleSubmit}>Join</button>\n        </div>\n      );\n    }\n  }\n\n  goToJoinPG() {\n    this.setState((state) => {\n      return {page: PG_JOIN}\n    })\n  }\n\n  handleChangeName(event) {\n    this.setState({name: event.target.value});\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    joinGame(this.state.value, this.state.name).then((res) => {\n      let player_json = JSON.parse(res.data.player)\n      let player = player_json.player\n      this.setState((state) => {\n        return {page: PG_GAME, key: this.state.value, player}\n      })\n    }).catch((err) => {console.error(err);})\n\n  }\n\n  createGame() {\n    this.setState((state) => {\n      return {page: PG_CREATING}\n    })\n    createGame().then((res) => {\n      let player_json = JSON.parse(res.data.player)\n      let player = player_json.player\n      this.setState((state) => {\n        return { page: PG_GAME, key: res.data.key, player}\n      })\n\n    }).catch((err) => {\n      console.log(err);\n      setTimeout(function () {\n        this.setState((state) => {\n          return {page: PG_HOME}\n        })\n      }.bind(this), 500);\n    })\n  }\n\n}\n\n\n\n\nexport default App;\n","import axios from 'axios';\n\nexport function createGame() {\n    return axios.post('http://165.22.187.65/create')\n}\n\nexport function joinGame(key, name) {\n    return axios.post('http://165.22.187.65/join', {game_key: key, name: name})\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}