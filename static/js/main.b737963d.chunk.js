(this["webpackJsonpbridge-client"]=this["webpackJsonpbridge-client"]||[]).push([[0],{50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},92:function(e,t){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(2),c=a.n(s),r=a(43),i=a.n(r),l=(a(50),a(6)),o=a(7),u=a(5),d=a(9),j=a(8),p=(a(51),a(52),a(22)),h=a.n(p);var m=a(44),b=a.n(m),y=(a(95),a(96),""),v="",g=b()("https://adampiziak.com"),O=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var s=e.player;return y=n.props.invite_code,v=s.key,n.state={user:s,time:(new Date).getTime(),game_state:{players:[null,null,null,null]}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.connect()}},{key:"connect",value:function(){var e=this,t=this.props.invite_code;console.log("connecting..."),g.emit("join_game",{game_key:t}),g.on("game_state",(function(t){var a=JSON.parse(t).game_state,n=a.turn_player===e.state.user.position,s=a.players.find((function(t){return t.key===e.state.user.key})).tricks_won;s||(s=0),e.setState({game_state:a,player_turn:n,points:s}),console.log(a)})),g.on("winner",(function(t){e.state.user.key===t?alert(":D"):alert(":(")}))}},{key:"render",value:function(){var e=this,t="";this.state.player_turn&&(t="player-turn");var a=this.state.game_state.players.filter((function(e){return e})).find((function(t){return t.key===e.state.user.key})),s="cards/back2.jpg";return a&&(a.card_played<0,s="cards/"+a.card_played+".png"),Object(n.jsxs)("div",{className:"game-cont",children:[Object(n.jsxs)("div",{className:"invite-code",children:[this.state.user.name,Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),"Invite code: ",this.props.invite_code]}),Object(n.jsxs)("div",{className:"game-area",children:[Object(n.jsx)("div",{className:"player left",children:Object(n.jsx)(x,{player:this.getPlayer(1)})}),Object(n.jsx)("div",{className:"player right",children:Object(n.jsx)(x,{player:this.getPlayer(3)})}),Object(n.jsx)("div",{className:"player top",children:Object(n.jsx)(x,{player:this.getPlayer(2)})}),Object(n.jsxs)("div",{className:"player-main "+t,children:[Object(n.jsx)("img",{className:"main-card-played",alt:s,src:s},s),Object(n.jsx)("div",{className:"turn-message",children:" Your Turn "}),Object(n.jsxs)("div",{children:[" Points: ",this.state.points," "]}),Object(n.jsx)(k,{state:this.state})]}),Object(n.jsx)("div",{className:"playing-area"})]})]})}},{key:"getPlayer",value:function(e){var t=(this.state.user.position+e)%4;return this.state.game_state.players[t]}}]),a}(c.a.Component);function f(e){var t=e.cards;if(null!=t){var a=t.sort((function(e,t){return e-t})).map((function(e){return Object(n.jsx)("img",{className:"op-card",alt:"card",src:"cards/back2.jpg"},e.toString())}));return Object(n.jsx)("div",{className:"op-container",children:Object(n.jsx)("div",{className:"op-card-list",children:a})})}return""}function x(e){if(null!=e.player){var t=e.player.card_played,a="cards/"+t+".png";return t<0?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"player-spot",children:[" [",e.player.tricks_won,"] ",e.player.name," "]}),Object(n.jsx)(f,{cards:e.player.cards})]}):Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"player-spot",children:[" [",e.player.tricks_won,"] ",e.player.name," "]}),Object(n.jsx)(f,{cards:e.player.cards}),Object(n.jsx)("img",{className:"op-card-played",alt:a,src:a},a)]})}return Object(n.jsx)("div",{className:"player-spot free",children:"Open"})}var k=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.state.game_state.players.filter((function(e){return e})).find((function(t){return t.key===e.props.state.user.key}));if(t&&void 0!==t){var a=t.cards.sort((function(e,t){return-e+t})).map((function(e){var t;return"cards/back.svg","cards/back2.jpg",t="cards/"+e+".png",Object(n.jsx)("img",{className:"my-card",alt:"card",src:t,onClick:function(){return function(e){console.log("playing card "+e),g.emit("play_card",{game_key:y,player_key:v,card_played:e})}(e)}},e.toString())}));return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"card-list",children:a})})}return""}}]),a}(c.a.Component),N=O,_=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={page:0,key:"",name:"",is_host:!1,value:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleChangeName=n.handleChangeName.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return 0===this.state.page?Object(n.jsx)("div",{className:"home",children:Object(n.jsxs)("div",{className:"home-container",children:[Object(n.jsx)("h1",{children:"Bridge Client"}),Object(n.jsx)("button",{className:"primary",onClick:function(){return e.createGame()},children:"Create Game"}),Object(n.jsx)("button",{className:"",onClick:function(){return e.goToJoinPG()},children:"Join"}),Object(n.jsx)("button",{className:"",onClick:function(){return e.goToJoinPG()},children:"Watch Bots"})]})}):1===this.state.page?Object(n.jsx)("div",{className:"App",children:Object(n.jsx)("div",{className:"create-lobby-page",children:Object(n.jsx)("b",{children:"Creating Game..."})})}):2===this.state.page?Object(n.jsx)(N,{invite_code:this.state.key,player:this.state.player}):3===this.state.page?Object(n.jsxs)("div",{className:"join-container",children:[Object(n.jsxs)("div",{className:"nes-field",children:[Object(n.jsx)("label",{children:"Name"}),Object(n.jsx)("input",{type:"text",id:"name_field",className:"nes-input",name:this.state.name,onChange:this.handleChangeName})]}),Object(n.jsxs)("div",{className:"nes-field",children:[Object(n.jsx)("label",{children:"Invite Code"}),Object(n.jsx)("input",{type:"text",id:"key_field",className:"nes-input",value:this.state.value,onChange:this.handleChange})]}),Object(n.jsx)("button",{type:"button",className:"nes-btn is-primary",onClick:this.handleSubmit,children:"Join"})]}):void 0}},{key:"goToJoinPG",value:function(){this.setState((function(e){return{page:3}}))}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t,a,n=this;e.preventDefault(),(t=this.state.value,a=this.state.name,h.a.post("https://adampiziak.com/join",{game_key:t,name:a})).then((function(e){var t=JSON.parse(e.data.player).player;n.setState((function(e){return{page:2,key:n.state.value,player:t}}))})).catch((function(e){console.error(e)}))}},{key:"createGame",value:function(){var e=this;h.a.post("https://adampiziak.com/create").then((function(t){var a=JSON.parse(t.data.player).player;e.setState((function(e){return{page:2,key:t.data.key,player:a}}))})).catch((function(t){console.log(t),setTimeout(function(){this.setState((function(e){return{page:0}}))}.bind(e),500)}))}}]),a}(c.a.Component),C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,98)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(_,{})}),document.getElementById("root")),C()}},[[97,1,2]]]);
//# sourceMappingURL=main.b737963d.chunk.js.map