{"version":3,"sources":["socket.js","Game/Player/Player.js","Game/Table/Table.js","Game/Game.js","App.js","api.js","reportWebVitals.js","index.js"],"names":["socket","io","Player","props","game","user","player","turn","bearing","position","bearingName","visible","dummy","declarer","player_turn","controllable","playerHand","cards","sort","a","b","map","c","backgroundFile","className","alt","src","onClick","card","emit","playCard","game_key","key","toString","PlayerHeader","name","bot","points","Table","cardList","players","p","card_played","relPos","gGameKey","suitName","val","Game","invite_code","state","time","Date","getTime","round_cards","this","connect","on","gs_json","JSON","parse","game_state","turn_player","setState","alert","find","playersComponents","trump_suit","React","Component","App","page","is_host","value","handleChange","bind","handleChangeName","handleSubmit","createGame","goToJoinPG","type","id","onChange","event","target","preventDefault","axios","post","then","res","data","catch","err","console","error","log","setTimeout","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f8000253.chunk.js","sourcesContent":["import io  from 'socket.io-client';\n\nexport const socket = io('https://adampiziak.com');\n","import React, { useState } from 'react';\nimport {socket} from '../../socket'\nimport './Player.sass'\n\nexport function Player(props) {\n  const game = props.game\n  const user = props.user\n  const player = props.player\n  const turn = props.turn\n\n  // position relative to user\n  const bearing = ((-user.position + 4) + player.position) % 4\n  const bearingName = `p${bearing}`\n\n  const visible = (player.dummy) ||\n                (player.position === user.position) ||\n                (user.dummy && player.declarer)\n\n  // Player turn\n  const player_turn = player.position === turn\n\n  // Can be controlled by user\n  let controllable = (player.position === user.position) ||\n                     (user.declarer && player.position === ((user.position + 2) % 4 ))\n  controllable = controllable & player_turn\n  if (user.dummy) {\n    controllable = false\n  }\n\n  // cards\n  const playerHand = player.cards.sort((a,b) => a - b).map((c) => {\n    let backgroundFile = \"cards/back2.jpg\"\n    if (visible) {\n      backgroundFile = \"cards/\" + c + \".png\"\n    }\n    if (controllable && player_turn) {\n      return (\n        <img className={`player-card ${visible ? \"visible\" : \"\"}`} alt=\"card\" key={c.toString()} src={backgroundFile} onClick={() => playCard(game.game_key,player.key, c)}/>\n      )\n    } else {\n      return (\n        <img className={`player-card ${visible ? \"visible\" : \"\"}`} alt=\"card\" key={c.toString()} src={backgroundFile} />\n      )\n    }\n  })\n\n  return (\n    <div className={`player ${bearingName} ${controllable ? \"controllable\" : \"\"} ${player_turn ? \"player-turn\" : \"\"}`}>\n      <PlayerHeader player={ player }/>\n      <div className=\"player-hand\">\n        { playerHand }\n      </div>\n    </div>\n  )\n}\n\nfunction playCard(game, player, card) {\n  if (!game) {\n    return\n  }\n  socket.emit(\"play_card\", {\n    \"player_key\": player,\n    \"game_key\": game,\n    \"card_played\": card\n  });\n}\n\nfunction sortByAlternatingColors(cards) {\n  \n}\n\n\nfunction PlayerHeader(props) {\n  const player = props.player\n  return (\n    <div className=\"player-header\">\n      <div className=\"player-name\">\n        <span className=\"name\"> {player.name}</span>\n        { player.dummy && <span className=\"dummy\"> (Dummy)</span> }\n        { player.declarer && <span className=\"declarer\"> (Declarer)</span> }\n        { player.bot && <span className=\"bot\">BOT </span> }\n      </div>\n      <div>\n        { player.points }\n      </div>\n    </div>\n  )\n}\n","import React, { useState } from 'react';\nimport './Table.sass'\n\nexport function Table(props) {\n  const user = props.user\n  const cards = props.cards\n  const turn = props.turn\n  const players = props.players\n\n  const cardList = players.map((p) => {\n    const c = p.card_played\n    const backgroundFile = \"cards/\" + c + \".png\"\n    const relPos = ((-user.position + 4) + p.position) % 4\n\n    return (\n      <img className={`table-card p${relPos} ${c >= 0 ? \"played\" : \"\"}`} alt=\"table-card\" key={c.toString()} src={backgroundFile} />\n    )\n  })\n\n  return (\n    <div className=\"table-container\">\n      <div className=\"table\">\n        {cardList}\n      </div>\n    </div>\n  )\n}\n","import React from 'react';\nimport io  from 'socket.io-client';\nimport './Game.css';\nimport './Game.sass'\nimport { Player } from './Player/Player'\nimport { Table } from './Table/Table'\nimport {socket} from '../socket'\n\n\nlet gGameKey = \"\"\nlet gPlayerKey = \"\"\n\n\nlet started = false\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    const player = props.player\n    gGameKey = this.props.invite_code\n    gPlayerKey = player.key\n    this.state = {\n      user: player,\n      time: new Date().getTime(),\n      game: {\n        key: gGameKey,\n        players: [],\n        round_cards: []\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.connect()\n  }\n\n  connect() {\n    const key = this.props.invite_code\n    socket.emit('join_game', { \"game_key\": key });\n\n\n    socket.on('game_state', state => {\n\n      const gs_json = JSON.parse(state).game_state\n      const player_turn = gs_json.turn_player === this.state.user.position\n      this.setState({\n        game: gs_json,\n        player_turn: player_turn\n      })\n    })\n\n    socket.on('winner', key => {\n      if (this.state.user.key === key) {\n        alert(\":D\");\n      } else {\n        alert(\":(\");\n      }\n    })\n  }\n\n  render() {\n    const game = this.state.game\n    const user = this.state.game.players.find(p => p.key === this.state.user.key)\n    const playersComponents = game.players.map((p) =>\n        <Player user={user}\n                player={p}\n                turn={game.turn}\n                game={this.state.game} />\n      )\n    return (\n      <div className=\"game\">\n        <div className=\"game-info\">\n          { this.props.invite_code}\n          <br />\n          SUIT: { suitName(game.trump_suit)}\n        </div>\n        { playersComponents }\n        <Table user={user} players={game.players} cards={game.round_cards} turn={game.turn} />\n        <div className=\"game-actions\">\n          <button className=\"action-restart\" onClick={() => redeal(game.game_key)}>Redeal</button>\n          <button className=\"action-restart\" onClick={() => start(game.game_key)}>Start</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction redeal(key) {\n  socket.emit('redeal', { \"game_key\": key });\n}\n\nfunction start(key) {\n  socket.emit('start', { \"game_key\": key });\n}\n\nfunction suitName(val) {\n  switch(val) {\n      case 0: return \"clubs\";\n      case 1: return \"diamonds\";\n      case 2: return \"hearts\";\n      case 3: return \"spades\"\n  }\n}\n\nexport default Game;\n","import React from 'react';\nimport './App.sass';\nimport {createGame, joinGame} from './api';\nimport Game from './Game/Game'\n\nconst PG_HOME = 0\nconst PG_CREATING = 1\nconst PG_GAME = 2\nconst PG_JOIN = 3\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: PG_HOME,\n      key: \"\",\n      name: \"\",\n      is_host: false,\n      value: \"\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeName = this.handleChangeName.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  render() {\n    if (this.state.page === PG_HOME) {\n      return (\n          <div className=\"home\">\n            <div className=\"home-container\">\n              <h1>DRL Bridge</h1>\n              <button className=\"primary\" onClick={() => this.createGame()}>Create Game</button>\n              <button className=\"\" onClick={() => this.goToJoinPG()}>Join</button>\n              <button className=\"\" onClick={() => this.goToJoinPG()}>Watch Bots</button>\n            </div>\n          </div>\n      );\n    }\n\n    if (this.state.page === PG_CREATING) {\n      return (\n        <div className=\"App\">\n          <div className=\"create-lobby-page\">\n          </div>\n        </div>\n      );\n    }\n\n    if (this.state.page === PG_GAME) {\n      return (\n        <Game invite_code={this.state.key} player={this.state.player}></Game>\n      );\n    }\n\n    if (this.state.page === PG_JOIN) {\n      return (\n        <div className=\"join-container\">\n          <div className=\"nes-field\">\n            <label>Name</label>\n            <input type=\"text\" id=\"name_field\" className=\"nes-input\" name={this.state.name} onChange={this.handleChangeName}/>\n          </div>\n          <div className=\"nes-field\">\n            <label>Invite Code</label>\n            <input type=\"text\" id=\"key_field\" className=\"nes-input\" value={this.state.value} onChange={this.handleChange}/>\n          </div>\n          <button type=\"button\" className=\"nes-btn is-primary\" onClick={this.handleSubmit}>Join</button>\n        </div>\n      );\n    }\n  }\n\n  goToJoinPG() {\n    this.setState((state) => {\n      return {page: PG_JOIN}\n    })\n  }\n\n  handleChangeName(event) {\n    this.setState({name: event.target.value});\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    joinGame(this.state.value, this.state.name).then((res) => {\n      let player_json = JSON.parse(res.data.player)\n      let player = player_json.player\n      this.setState((state) => {\n        return {page: PG_GAME, key: this.state.value, player}\n      })\n    }).catch((err) => {console.error(err);})\n\n  }\n\n  createGame() {\n    this.setState((state) => {\n      return {page: PG_CREATING}\n    })\n    createGame().then((res) => {\n      let player_json = JSON.parse(res.data.player)\n      let player = player_json.player\n      this.setState((state) => {\n        return { page: PG_GAME, key: res.data.key, player}\n      })\n\n    }).catch((err) => {\n      console.log(err);\n      setTimeout(function () {\n        this.setState((state) => {\n          return {page: PG_HOME}\n        })\n      }.bind(this), 500);\n    })\n  }\n\n}\n\n\n\n\nexport default App;\n","import axios from 'axios';\n\n\nexport function createGame() {\n    return axios.post('https://adampiziak.com/create')\n}\n\nexport function joinGame(key, name) {\n    return axios.post('https://adampiziak.com/join', {game_key: key, name: name})\n}\n\n/*\nexport function createGame() {\n    return axios.post('http://127.0.0.1:5000/create')\n}\n\nexport function joinGame(key, name) {\n    return axios.post('http://127.0.0.1:5000/join', {game_key: key, name: name})\n}\n*/\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}