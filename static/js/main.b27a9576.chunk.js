(this["webpackJsonpbridge-client"]=this["webpackJsonpbridge-client"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a.n(c),r=a(49),i=a.n(r),l=(a(57),a(14)),o=a(15),u=a(5),d=a(18),p=a(17),j=(a(58),a(27),a(26)),m=a.n(j);a(75),a(36);var b=a(50),h=a.n(b)()("https://adampiziak.com"),v=(a(102),function(e){var t=e.game,a=e.user,c=e.player,s=(4-a.position+c.position)%4,r="p".concat(s),i=c.dummy||c.position===a.position||a.dummy&&c.declarer||e.visible,l=c.position===t.turn,o=c.position===t.lead&&l,u=c.position===a.position||a.declarer&&c.position===(a.position+2)%4;return Object(n.jsxs)("div",{className:"player ".concat(r," ").concat(u?"controllable":""," ").concat(l?"player-turn":""," ").concat(o?"winner":""),children:[Object(n.jsx)(y,{player:c}),Object(n.jsx)(g,{player:c,gkey:t.key,controllable:u,visible:i})]})}),g=function(e){var t=e.player,a=e.gkey,c=e.controllable,s=e.visible,r=t.cards.sort((function(e,t){return e-t})).map((function(e,r){var i="cards/back2.jpg";return s&&(i="cards/"+e+".png"),c?Object(n.jsx)("img",{className:"player-card ".concat(s?"visible":""),alt:"card",src:i,onClick:function(){return function(e){h.emit("play_card",{player_key:t.key,game_key:a,card_played:e}),console.log("hey")}(e)}},r.toString()):Object(n.jsx)("img",{className:"player-card ".concat(s?"visible":""),alt:"card",src:i},r.toString())}));return Object(n.jsx)("div",{className:"player-hand",children:r})},y=function(e){var t=e.player;return Object(n.jsxs)("div",{className:"player-header",children:[Object(n.jsxs)("div",{className:"player-points",children:[" ",t.points," "]}),Object(n.jsxs)("div",{className:"player-info",children:[Object(n.jsxs)("span",{className:"player-name",children:[" ",t.name," "]}),t.dummy&&Object(n.jsx)("span",{className:"dummy",children:" Dummy"}),t.declarer&&Object(n.jsx)("span",{className:"declarer",children:" Declarer"})]})]})},O=(a(103),function(e){var t=e.user,a=e.players.map((function(e,a){var c=e.card_played,s="cards/"+c+".png",r=(4-t.position+e.position)%4;return Object(n.jsx)("img",{className:"table-card p".concat(r," ").concat(c>=0?"played":""),alt:"table-card",src:s},a.toString())}));return Object(n.jsx)("div",{className:"table-container",children:Object(n.jsx)("div",{className:"table",children:a})})}),f="";function x(e){switch(e){case 0:return"clubs";case 1:return"diamonds";case 2:return"hearts";case 3:return"spades";default:return"?"}}s.a.Component;var N=a(6),k=function(e){var t=e.user,a=e.gameKey,s=Object(c.useState)({players:[],round_cards:[],turn:-1}),r=Object(N.a)(s,2),i=r[0],l=r[1],o=Object(c.useState)(!1),u=Object(N.a)(o,2),d=u[0],p=u[1];return Object(c.useEffect)((function(){console.log("Hola"),h.emit("join_game",{game_key:a}),h.on("game_state",(function(e){var t=JSON.parse(e).game_state;l(t),console.log("setting")}))}),[]),Object(n.jsxs)("div",{className:"game",children:[Object(n.jsx)(_,{game:i}),Object(n.jsx)(O,{user:t,players:i.players}),Object(n.jsx)(C,{user:t,game:i,visible:d}),Object(n.jsx)(S,{gkey:a,vis:d,setVis:p})]})},C=function(e){var t=e.game,a=e.user,c=e.visible,r=t.players.map((function(e,s){return Object(n.jsx)(v,{user:a,player:e,visible:c,game:t},s.toString())}));return Object(n.jsx)(s.a.Fragment,{children:r})},S=function(e){var t=e.gkey,a=e.vis,c=e.setVis;return Object(n.jsxs)("div",{className:"game-actions",children:[Object(n.jsx)("button",{className:"game-action",onClick:function(){return h.emit("start",{key:t})},children:"Start"}),Object(n.jsx)("button",{className:"game-action",onClick:function(){return h.emit("redeal",{key:t})},children:"Deal"}),Object(n.jsx)("button",{className:"game-action",onClick:function(){return c(!a)},children:"Toggle Visibility"})]})},_=function(e){var t=e.game,a=function(e){switch(e){case 0:return"clubs";case 1:return"diamonds";case 2:return"hearts";case 3:return"spades";default:return"?"}}(t.trump_suit),c=t.contract_number;return Object(n.jsxs)("div",{className:"game-info",children:[Object(n.jsxs)("div",{className:"game-key",children:[" Invite Code: ",t.key]}),Object(n.jsxs)("div",{className:"game-trump",children:["Trump: ",a.toUpperCase()]}),Object(n.jsxs)("div",{className:"game-contract",children:["Contract: ",c," | ",c+6]})]})},w=a(51),J=a(8),G=a.n(J);a(105),a(106);function T(e){var t=Object(c.useState)("Host"),a=Object(N.a)(t,2),s=a[0],r=a[1],i=[{value:0,label:"[host] ".concat(s)},{value:1,label:"Human"},{value:2,label:"Arch 2"},{value:3,label:"RandomMove"},{value:4,label:"BrianBot"}],l=Object(c.useState)([0,4,4,4]),o=Object(N.a)(l,2),u=o[0],d=o[1],p=function(e,t){var a=u;if(a[e]=t.value,0===t.value)for(var n=0;n<4;n++)0===a[n]&&n!==e&&(a[n]=1);console.log(a),d(Object(w.a)(a)),console.log(u),console.log(i[u[0]]),console.log(i)};return Object(n.jsx)("div",{className:"create-lobby-page",children:Object(n.jsx)("div",{className:"create-lobby-container",children:Object(n.jsxs)("div",{className:"create-lobby",children:[Object(n.jsx)("input",{className:"drl-text-input host-name",value:s,type:"text",placeholder:"Host name",onChange:function(e){r(e.target.value)}}),Object(n.jsxs)("div",{className:"tablez",children:[Object(n.jsx)("div",{className:"player-position north",children:Object(n.jsx)(G.a,{className:"drl-dropdown cp",options:i,value:i[u[0]],onChange:function(e){return p(0,e)},placeholder:"Select an option"})}),Object(n.jsx)("div",{className:"player-position east",children:Object(n.jsx)(G.a,{className:"drl-dropdown cp",options:i,value:i[u[1]],onChange:function(e){return p(1,e)},placeholder:"Select an option"})}),Object(n.jsx)("div",{className:"player-position west",children:Object(n.jsx)(G.a,{className:"drl-dropdown cp",options:i,value:i[u[3]],onChange:function(e){return p(3,e)},placeholder:"Select an option"})}),Object(n.jsx)("div",{className:"player-position south",children:Object(n.jsx)(G.a,{className:"drl-dropdown cp",options:i,value:i[u[2]],onChange:function(e){return p(2,e)},placeholder:"Select an option"})})]}),Object(n.jsx)("button",{className:"drl-button",onClick:function(){return e.create([s,u])},children:"Launch Game"})]})})})}var D=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={page:0,key:"",name:"",is_host:!1,value:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleChangeName=n.handleChangeName.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return 0===this.state.page?Object(n.jsx)("div",{className:"home",children:Object(n.jsxs)("div",{className:"home-container",children:[Object(n.jsx)("h1",{children:"DRL Bridge"}),Object(n.jsx)("button",{className:"primary",onClick:function(){return e.goToCreatePG()},children:"Create Game"}),Object(n.jsx)("button",{className:"",onClick:function(){return e.goToJoinPG()},children:"Join"})]})}):1===this.state.page?Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(T,{create:this.createGame.bind(this)})}):2===this.state.page?Object(n.jsx)(k,{gameKey:this.state.key,user:this.state.player}):3===this.state.page?Object(n.jsxs)("div",{className:"join-container",children:[Object(n.jsx)("input",{placeholder:"Name",type:"text",id:"name_field",className:"nes-input",name:this.state.name,onChange:this.handleChangeName}),Object(n.jsx)("input",{placeholder:"Invite Code",type:"text",id:"key_field",className:"nes-input",value:this.state.value,onChange:this.handleChange}),Object(n.jsx)("button",{type:"button",className:"nes-btn is-primary",onClick:this.handleSubmit,children:"Join"})]}):void 0}},{key:"goToJoinPG",value:function(){this.setState((function(e){return{page:3}}))}},{key:"goToCreatePG",value:function(){this.setState((function(e){return{page:1}}))}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t,a,n=this;e.preventDefault(),(t=this.state.value,a=this.state.name,m.a.post("https://adampiziak.com/join",{game_key:t,name:a})).then((function(e){var t=JSON.parse(e.data.player).player;n.setState((function(e){return{page:2,key:n.state.value,player:t}}))})).catch((function(e){console.error(e)}))}},{key:"createGame",value:function(e){var t,a,n=this;(t=e[0],a=e[1],m.a.post("https://adampiziak.com/create",{host:t,players:a})).then((function(e){var t=JSON.parse(e.data.player).player;n.setState({page:2,key:e.data.key,player:t})})).catch((function(e){n.setState((function(e){return{page:0}}))}))}}]),a}(s.a.Component),P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,108)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(D,{})}),document.getElementById("root")),P()},27:function(e,t,a){},36:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},75:function(e,t,a){},99:function(e,t){}},[[107,1,2]]]);
//# sourceMappingURL=main.b27a9576.chunk.js.map